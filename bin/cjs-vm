#!/usr/bin/env node
"use strict";
const program = require('commander');
var tools = require('../src/cli.js');
var lex = require('../src/lexico/scanner');
var pars = require('../src/sintactico/parser');

program
	.version('0.1.0')
	.option('-C, --chdir <path>', 'change the working directory')
	.option('-c, --config <path>', 'set config path. defaults to ./deploy.conf')
	.option('-T, --no-tests', 'ignore test hook');

program
	.command('test')
	.description('test')
	.option("-s, --setup_mode [mode]", "Which setup mode to use")
	.action(function () {
		console.log(lex.fromFile('texto.txt'))
	}
	);
program
	.command('lex <file>')
	.description('run lexicograph analysis')
	.option("-p, --print", "to output the resulting tokens",)
	.option("-s, --string", "to use file as the text to analize and not path",)
	.action(function (file, options) {
		if (options.print) {
			let tokens = lex.fromFile(file);
			//console.log(tokens);
			pars.parse(tokens);
		}
		
	});

program
	.command('exec <cmd>')
	.alias('ex')
	.description('execute the given remote cmd')
	.option("-e, --exec_mode <mode>", "Which exec mode to use")
	.action(function (cmd, options) {
		console.log('exec "%s" using %s mode', cmd, options.exec_mode);
	}).on('--help', function () {
		console.log('');
		console.log('Examples:');
	});

program.parse(process.argv);